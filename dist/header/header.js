import{h as g}from"../chunks/main-Cj7uJizB.js";import{loadFragment as x}from"../fragment/fragment.js";const o=window.matchMedia("(min-width: 900px)");function h(t){if(t.code==="Escape"){const e=document.getElementById("nav"),n=e.querySelector(".nav-sections"),a=n.querySelector('[aria-expanded="true"]');a&&o.matches?(l(n),a.focus()):o.matches||(d(e,n),e.querySelector("button").focus())}}function E(t){const e=t.currentTarget;if(!e.contains(t.relatedTarget)){const n=e.querySelector(".nav-sections");n.querySelector('[aria-expanded="true"]')&&o.matches?l(n,!1):o.matches||d(e,n,!1)}}function w(t){const e=document.activeElement;if(e.className==="nav-drop"&&(t.code==="Enter"||t.code==="Space")){const a=e.getAttribute("aria-expanded")==="true";l(e.closest(".nav-sections")),e.setAttribute("aria-expanded",a?"false":"true")}}function y(){document.activeElement.addEventListener("keydown",w)}function l(t,e=!1){t.querySelectorAll(".nav-sections .default-content-wrapper > ul > li").forEach(n=>{n.setAttribute("aria-expanded",e)})}function d(t,e,n=null){const a=n!==null?!n:t.getAttribute("aria-expanded")==="true",s=t.querySelector(".nav-hamburger button");document.body.style.overflowY=a||o.matches?"":"hidden",t.setAttribute("aria-expanded",a?"false":"true"),l(e,a||o.matches?"false":"true"),s.setAttribute("aria-label",a?"Open navigation":"Close navigation");const v=e.querySelectorAll(".nav-drop");o.matches?v.forEach(c=>{c.hasAttribute("tabindex")||(c.setAttribute("tabindex",0),c.addEventListener("focus",y))}):v.forEach(c=>{c.removeAttribute("tabindex"),c.removeEventListener("focus",y)}),!a||o.matches?(window.addEventListener("keydown",h),t.addEventListener("focusout",E)):(window.removeEventListener("keydown",h),t.removeEventListener("focusout",E))}async function A(t){const e=g("nav"),n=e?new URL(e,window.location).pathname:"/nav",a=await x(n);t.textContent="";const s=document.createElement("nav");for(s.id="nav";a.firstElementChild;)s.append(a.firstElementChild);["brand","sections","tools"].forEach((r,m)=>{const b=s.children[m];b&&b.classList.add(`nav-${r}`)});const f=s.querySelector(".nav-brand").querySelector(".button");f&&(f.className="",f.closest(".button-container").className="");const i=s.querySelector(".nav-sections");i&&i.querySelectorAll(":scope .default-content-wrapper > ul > li").forEach(r=>{r.querySelector("ul")&&r.classList.add("nav-drop"),r.addEventListener("click",()=>{if(o.matches){const m=r.getAttribute("aria-expanded")==="true";l(i),r.setAttribute("aria-expanded",m?"false":"true")}})});const u=document.createElement("div");u.classList.add("nav-hamburger"),u.innerHTML=`<button type="button" aria-controls="nav" aria-label="Open navigation">
      <span class="nav-hamburger-icon"></span>
    </button>`,u.addEventListener("click",()=>d(s,i)),s.prepend(u),s.setAttribute("aria-expanded","false"),d(s,i,o.matches),o.addEventListener("change",()=>d(s,i,o.matches));const p=document.createElement("div");p.className="nav-wrapper",p.append(s),t.append(p)}export{A as default};
//# sourceMappingURL=header.js.map
