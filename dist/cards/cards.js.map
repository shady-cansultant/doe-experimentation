{"version":3,"file":"cards.js","sources":["../../src/blocks/cards/cards.js"],"sourcesContent":["import 'nsw-design-system/src/components/card/_card.scss';\nimport './cards.css';\n\nimport { createOptimizedPicture } from '../../scripts/aem.js';\nimport { moveInstrumentation } from '../../scripts/scripts.js';\n\nexport default function decorate(block) {\n  /* change to ul, li */\n  const ul = document.createElement('ul');\n\n  [...block.children].forEach((row) => {\n    const li = document.createElement('li');\n    li.classList.add('nsw-card');\n    moveInstrumentation(row, li);\n    while (row.firstElementChild) li.append(row.firstElementChild);\n\n    const [firstColumn, secondColumn, thirdColumn, fourthColumn] = li.children;\n\n    // case (1) - Image exists\n    const firstColumnFilled = !!firstColumn.querySelector('picture');\n    if (firstColumnFilled) {\n      firstColumn.className = 'nsw-card__image';\n    } else {\n      // remove the div\n      firstColumn.remove();\n    }\n\n    // case (2) - Second div Headline (required)\n    const contentWrapper = document.createElement('div');\n    contentWrapper.className = 'nsw-card__content';\n\n    const titleWrapper = document.createElement('div');\n    titleWrapper.className = 'nsw-card__title';\n\n    // move the children of the second div to the titleWrapper\n    while (secondColumn.firstElementChild) titleWrapper.append(secondColumn.firstElementChild);\n\n    // remove the p wrapper around the <a> tag\n    const a = titleWrapper.querySelector('a');\n    if (a) {\n      const p = a.closest('p');\n      if (p) {\n        p.replaceWith(a);\n        a.classList.remove('button');\n      }\n    }\n\n    contentWrapper.append(titleWrapper);\n\n    // insert after the firstColumn\n    if (firstColumnFilled) {\n      firstColumn.after(contentWrapper);\n    } else {\n      li.prepend(contentWrapper);\n    }\n\n    secondColumn.remove();\n\n    // case (3) - Third div Text (optional)\n    if (thirdColumn.innerHTML.trim()) {\n      thirdColumn.classList.add('nsw-card__copy');\n\n      // insert after the third div\n      contentWrapper.append(thirdColumn);\n    } else {\n      thirdColumn.remove();\n    }\n\n    // case (4) - Fourth div Trailing Icon (optional)\n    if (fourthColumn.innerHTML.trim()) {\n      // get the current type of icon\n      const icon = fourthColumn.querySelector('.icon');\n      if (icon) {\n        const p = icon.closest('p');\n        if (p) {\n          moveInstrumentation(icon, p);\n\n          // move the classes from icon to p\n          p.classList.add(...icon.classList);\n\n          p.classList.add('material-icons', 'nsw-material-icons');\n          p.setAttribute('focusable', 'false');\n          p.setAttribute('aria-hidden', 'true');\n          p.textContent = 'east';\n        } else {\n          icon.classList.add('material-icons', 'nsw-material-icons');\n          icon.setAttribute('focusable', 'false');\n          icon.setAttribute('aria-hidden', 'true');\n          icon.textContent = 'east';\n        }\n      }\n      contentWrapper.append(fourthColumn);\n    }\n\n    ul.append(li);\n\n    // add variation classes\n    if (block.classList.contains('highlight')) {\n      li.classList.add('nsw-card--highlight');\n    }\n\n    if (block.classList.contains('dark')) {\n      li.classList.add('nsw-card--dark');\n    }\n\n    if (block.classList.contains('light')) {\n      li.classList.add('nsw-card--light');\n    }\n\n    if (block.classList.contains('horizontal')) {\n      li.classList.add('nsw-card--horizontal');\n    }\n  });\n  ul.querySelectorAll('picture > img').forEach((img) => {\n    const optimizedPic = createOptimizedPicture(img.src, img.alt, false, [{ width: '750' }]);\n    moveInstrumentation(img, optimizedPic.querySelector('img'));\n    img.closest('picture').replaceWith(optimizedPic);\n  });\n  block.textContent = '';\n  block.append(ul);\n}\n"],"names":["decorate","block","ul","row","li","moveInstrumentation","firstColumn","secondColumn","thirdColumn","fourthColumn","firstColumnFilled","contentWrapper","titleWrapper","a","p","icon","img","optimizedPic","createOptimizedPicture"],"mappings":"sGAMe,SAASA,EAASC,EAAO,CAEtC,MAAMC,EAAK,SAAS,cAAc,IAAI,EAEtC,CAAC,GAAGD,EAAM,QAAQ,EAAE,QAASE,GAAQ,CACnC,MAAMC,EAAK,SAAS,cAAc,IAAI,EAGtC,IAFAA,EAAG,UAAU,IAAI,UAAU,EAC3BC,EAAoBF,EAAKC,CAAE,EACpBD,EAAI,mBAAmBC,EAAG,OAAOD,EAAI,iBAAiB,EAE7D,KAAM,CAACG,EAAaC,EAAcC,EAAaC,CAAY,EAAIL,EAAG,SAG5DM,EAAoB,CAAC,CAACJ,EAAY,cAAc,SAAS,EAC3DI,EACFJ,EAAY,UAAY,kBAGxBA,EAAY,OAAQ,EAItB,MAAMK,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,oBAE3B,MAAMC,EAAe,SAAS,cAAc,KAAK,EAIjD,IAHAA,EAAa,UAAY,kBAGlBL,EAAa,mBAAmBK,EAAa,OAAOL,EAAa,iBAAiB,EAGzF,MAAMM,EAAID,EAAa,cAAc,GAAG,EACxC,GAAIC,EAAG,CACL,MAAMC,EAAID,EAAE,QAAQ,GAAG,EACnBC,IACFA,EAAE,YAAYD,CAAC,EACfA,EAAE,UAAU,OAAO,QAAQ,EAEnC,CAwBI,GAtBAF,EAAe,OAAOC,CAAY,EAG9BF,EACFJ,EAAY,MAAMK,CAAc,EAEhCP,EAAG,QAAQO,CAAc,EAG3BJ,EAAa,OAAQ,EAGjBC,EAAY,UAAU,QACxBA,EAAY,UAAU,IAAI,gBAAgB,EAG1CG,EAAe,OAAOH,CAAW,GAEjCA,EAAY,OAAQ,EAIlBC,EAAa,UAAU,OAAQ,CAEjC,MAAMM,EAAON,EAAa,cAAc,OAAO,EAC/C,GAAIM,EAAM,CACR,MAAMD,EAAIC,EAAK,QAAQ,GAAG,EACtBD,GACFT,EAAoBU,EAAMD,CAAC,EAG3BA,EAAE,UAAU,IAAI,GAAGC,EAAK,SAAS,EAEjCD,EAAE,UAAU,IAAI,iBAAkB,oBAAoB,EACtDA,EAAE,aAAa,YAAa,OAAO,EACnCA,EAAE,aAAa,cAAe,MAAM,EACpCA,EAAE,YAAc,SAEhBC,EAAK,UAAU,IAAI,iBAAkB,oBAAoB,EACzDA,EAAK,aAAa,YAAa,OAAO,EACtCA,EAAK,aAAa,cAAe,MAAM,EACvCA,EAAK,YAAc,OAE7B,CACMJ,EAAe,OAAOF,CAAY,CACxC,CAEIP,EAAG,OAAOE,CAAE,EAGRH,EAAM,UAAU,SAAS,WAAW,GACtCG,EAAG,UAAU,IAAI,qBAAqB,EAGpCH,EAAM,UAAU,SAAS,MAAM,GACjCG,EAAG,UAAU,IAAI,gBAAgB,EAG/BH,EAAM,UAAU,SAAS,OAAO,GAClCG,EAAG,UAAU,IAAI,iBAAiB,EAGhCH,EAAM,UAAU,SAAS,YAAY,GACvCG,EAAG,UAAU,IAAI,sBAAsB,CAE7C,CAAG,EACDF,EAAG,iBAAiB,eAAe,EAAE,QAASc,GAAQ,CACpD,MAAMC,EAAeC,EAAuBF,EAAI,IAAKA,EAAI,IAAK,GAAO,CAAC,CAAE,MAAO,KAAO,CAAA,CAAC,EACvFX,EAAoBW,EAAKC,EAAa,cAAc,KAAK,CAAC,EAC1DD,EAAI,QAAQ,SAAS,EAAE,YAAYC,CAAY,CACnD,CAAG,EACDhB,EAAM,YAAc,GACpBA,EAAM,OAAOC,CAAE,CACjB"}