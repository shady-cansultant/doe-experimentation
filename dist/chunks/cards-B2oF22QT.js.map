{"version":3,"file":"cards-B2oF22QT.js","sources":["../../src/blocks/cards/cards.js"],"sourcesContent":["import 'nsw-design-system/src/components/card/_card.scss';\nimport './cards.css';\n\nimport { createOptimizedPicture } from '../../scripts/aem.js';\nimport { moveInstrumentation } from '../../scripts/scripts.js';\n\nexport default function decorate(block) {\n  /* change to ul, li */\n  const ul = document.createElement('ul');\n  [...block.children].forEach((row) => {\n    const li = document.createElement('li');\n    li.classList.add('nsw-card');\n    moveInstrumentation(row, li);\n    while (row.firstElementChild) li.append(row.firstElementChild);\n\n    const [firstColumn, secondDiv, thirdDiv, fourthDiv] = li.children;\n\n    // case (1) - Image exists\n    if (firstColumn.querySelector('picture')) {\n      firstColumn.className = 'nsw-card__image';\n    } else {\n      // remove the div\n      firstColumn.remove();\n    }\n\n    // case (2) - Second div Headline (required)\n    const contentWrapper = document.createElement('div');\n    contentWrapper.className = 'nsw-card__content';\n\n    const titleWrapper = document.createElement('div');\n    titleWrapper.className = 'nsw-card__title';\n\n    // move the children of the second div to the titleWrapper\n    while (secondDiv.firstElementChild) titleWrapper.append(secondDiv.firstElementChild);\n\n    // remove the p wrapper around the <a> tag\n    const a = titleWrapper.querySelector('a');\n    if (a) {\n      const p = a.closest('p');\n      if (p) {\n        p.replaceWith(a);\n        a.classList.remove('button');\n      }\n    }\n\n    contentWrapper.append(titleWrapper);\n\n    // insert after the firstColumn\n    firstColumn.after(contentWrapper);\n\n    secondDiv.remove();\n\n    // case (3) - Third div Text (optional)\n    if (thirdDiv.innerHTML.trim()) {\n      thirdDiv.classList.add('nsw-card__copy');\n\n      // insert after the third div\n      contentWrapper.append(thirdDiv);\n    } else {\n      thirdDiv.remove();\n    }\n\n    // case (4) - Fourth div Trailing Icon (optional)\n    if (fourthDiv.innerHTML.trim()) {\n      // get the current type of icon\n      const icon = fourthDiv.querySelector('.icon');\n      if (icon) {\n        const p = icon.closest('p');\n        if (p) {\n          moveInstrumentation(icon, p);\n\n          // move the classes from icon to p\n          p.classList.add(...icon.classList);\n\n          p.classList.add('material-icons', 'nsw-material-icons');\n          p.setAttribute('focusable', 'false');\n          p.setAttribute('aria-hidden', 'true');\n          p.textContent = 'east';\n        } else {\n          icon.classList.add('material-icons', 'nsw-material-icons');\n          icon.setAttribute('focusable', 'false');\n          icon.setAttribute('aria-hidden', 'true');\n          icon.textContent = 'east';\n        }\n      }\n      contentWrapper.append(fourthDiv);\n    }\n\n    ul.append(li);\n\n    // add variation classes\n    if (block.classList.contains('highlight')) {\n      li.classList.add('nsw-card--highlight');\n    }\n\n    if (block.classList.contains('dark')) {\n      li.classList.add('nsw-card--dark');\n    }\n\n    if (block.classList.contains('light')) {\n      li.classList.add('nsw-card--light');\n    }\n\n    if (block.classList.contains('horizontal')) {\n      li.classList.add('nsw-card--horizontal');\n    }\n  });\n  ul.querySelectorAll('picture > img').forEach((img) => {\n    const optimizedPic = createOptimizedPicture(img.src, img.alt, false, [{ width: '750' }]);\n    moveInstrumentation(img, optimizedPic.querySelector('img'));\n    img.closest('picture').replaceWith(optimizedPic);\n  });\n  block.textContent = '';\n  block.append(ul);\n}\n"],"names":["decorate","block","ul","row","li","moveInstrumentation","firstColumn","secondDiv","thirdDiv","fourthDiv","contentWrapper","titleWrapper","a","p","icon","img","optimizedPic","createOptimizedPicture"],"mappings":"iDAMe,SAASA,EAASC,EAAO,CAEtC,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtC,CAAC,GAAGD,EAAM,QAAQ,EAAE,QAASE,GAAQ,CACnC,MAAMC,EAAK,SAAS,cAAc,IAAI,EAGtC,IAFAA,EAAG,UAAU,IAAI,UAAU,EAC3BC,EAAoBF,EAAKC,CAAE,EACpBD,EAAI,mBAAmBC,EAAG,OAAOD,EAAI,iBAAiB,EAE7D,KAAM,CAACG,EAAaC,EAAWC,EAAUC,CAAS,EAAIL,EAAG,SAGrDE,EAAY,cAAc,SAAS,EACrCA,EAAY,UAAY,kBAGxBA,EAAY,OAAQ,EAItB,MAAMI,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,oBAE3B,MAAMC,EAAe,SAAS,cAAc,KAAK,EAIjD,IAHAA,EAAa,UAAY,kBAGlBJ,EAAU,mBAAmBI,EAAa,OAAOJ,EAAU,iBAAiB,EAGnF,MAAMK,EAAID,EAAa,cAAc,GAAG,EACxC,GAAIC,EAAG,CACL,MAAMC,EAAID,EAAE,QAAQ,GAAG,EACnBC,IACFA,EAAE,YAAYD,CAAC,EACfA,EAAE,UAAU,OAAO,QAAQ,EAEnC,CAoBI,GAlBAF,EAAe,OAAOC,CAAY,EAGlCL,EAAY,MAAMI,CAAc,EAEhCH,EAAU,OAAQ,EAGdC,EAAS,UAAU,QACrBA,EAAS,UAAU,IAAI,gBAAgB,EAGvCE,EAAe,OAAOF,CAAQ,GAE9BA,EAAS,OAAQ,EAIfC,EAAU,UAAU,OAAQ,CAE9B,MAAMK,EAAOL,EAAU,cAAc,OAAO,EAC5C,GAAIK,EAAM,CACR,MAAMD,EAAIC,EAAK,QAAQ,GAAG,EACtBD,GACFR,EAAoBS,EAAMD,CAAC,EAG3BA,EAAE,UAAU,IAAI,GAAGC,EAAK,SAAS,EAEjCD,EAAE,UAAU,IAAI,iBAAkB,oBAAoB,EACtDA,EAAE,aAAa,YAAa,OAAO,EACnCA,EAAE,aAAa,cAAe,MAAM,EACpCA,EAAE,YAAc,SAEhBC,EAAK,UAAU,IAAI,iBAAkB,oBAAoB,EACzDA,EAAK,aAAa,YAAa,OAAO,EACtCA,EAAK,aAAa,cAAe,MAAM,EACvCA,EAAK,YAAc,OAE7B,CACMJ,EAAe,OAAOD,CAAS,CACrC,CAEIP,EAAG,OAAOE,CAAE,EAGRH,EAAM,UAAU,SAAS,WAAW,GACtCG,EAAG,UAAU,IAAI,qBAAqB,EAGpCH,EAAM,UAAU,SAAS,MAAM,GACjCG,EAAG,UAAU,IAAI,gBAAgB,EAG/BH,EAAM,UAAU,SAAS,OAAO,GAClCG,EAAG,UAAU,IAAI,iBAAiB,EAGhCH,EAAM,UAAU,SAAS,YAAY,GACvCG,EAAG,UAAU,IAAI,sBAAsB,CAE7C,CAAG,EACDF,EAAG,iBAAiB,eAAe,EAAE,QAASa,GAAQ,CACpD,MAAMC,EAAeC,EAAuBF,EAAI,IAAKA,EAAI,IAAK,GAAO,CAAC,CAAE,MAAO,KAAO,CAAA,CAAC,EACvFV,EAAoBU,EAAKC,EAAa,cAAc,KAAK,CAAC,EAC1DD,EAAI,QAAQ,SAAS,EAAE,YAAYC,CAAY,CACnD,CAAG,EACDf,EAAM,YAAc,GACpBA,EAAM,OAAOC,CAAE,CACjB"}