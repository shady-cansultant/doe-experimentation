{"version":3,"file":"cards-De89_pOl.js","sources":["../../src/blocks/cards/cards.js"],"sourcesContent":["import './cards.css';\nimport 'nsw-design-system/src/components/card/_card.scss';\n\nimport { createOptimizedPicture } from '../../scripts/aem.js';\nimport { moveInstrumentation } from '../../scripts/scripts.js';\n\nexport default function decorate(block) {\n  /* change to ul, li */\n  const ul = document.createElement('ul');\n  [...block.children].forEach((row) => {\n    const li = document.createElement('li');\n    li.classList.add('nsw-card', 'nsw-card--dark');\n    moveInstrumentation(row, li);\n    while (row.firstElementChild) li.append(row.firstElementChild);\n    [...li.children].forEach((div) => {\n      if (div.children.length === 1 && div.querySelector('picture')) div.className = 'nsw-card__image';\n      else if (div.children.length > 0) {\n        div.className = 'nsw-card__content';\n\n        let titleDiv;\n        const header = div.querySelector(':is(h1,h2,h3,h4,h5,h6)');\n        if (header) {\n          titleDiv = document.createElement('div');\n          titleDiv.className = 'nsw-card__title';\n\n          if (header.querySelector('a')) {\n            // unwrap the header\n            const a = header.querySelector('a');\n            const p = document.createElement('p');\n            moveInstrumentation(header, div);\n            p.append(a);\n            titleDiv.append(p);\n            header.remove();\n          } else {\n            titleDiv.append(header);\n          }\n        }\n\n        // the rest is wrapped in a \"nsw-card__copy\" div\n        const copyDiv = document.createElement('div');\n        copyDiv.className = 'nsw-card__copy';\n        [...div.children].forEach((child) => {\n          if (child !== titleDiv) {\n            copyDiv.append(child);\n            moveInstrumentation(child, div);\n          }\n        });\n        div.append(copyDiv);\n\n        if (titleDiv) div.prepend(titleDiv);\n\n        const icon = document.createElement('span');\n        icon.className = 'material-icons nsw-material-icons';\n        icon.setAttribute('focusable', 'false');\n        icon.setAttribute('aria-hidden', 'true');\n        icon.textContent = 'east';\n\n        div.append(icon);\n      } else div.remove();\n    });\n    ul.append(li);\n  });\n  ul.querySelectorAll('picture > img').forEach((img) => {\n    const optimizedPic = createOptimizedPicture(img.src, img.alt, false, [{ width: '750' }]);\n    moveInstrumentation(img, optimizedPic.querySelector('img'));\n    img.closest('picture').replaceWith(optimizedPic);\n  });\n  block.textContent = '';\n  block.append(ul);\n}\n"],"names":["decorate","block","ul","row","li","moveInstrumentation","div","titleDiv","header","a","p","copyDiv","child","icon","img","optimizedPic","createOptimizedPicture"],"mappings":"iDAMe,SAASA,EAASC,EAAO,CAEtC,MAAMC,EAAK,SAAS,cAAc,IAAI,EACtC,CAAC,GAAGD,EAAM,QAAQ,EAAE,QAASE,GAAQ,CACnC,MAAMC,EAAK,SAAS,cAAc,IAAI,EAGtC,IAFAA,EAAG,UAAU,IAAI,WAAY,gBAAgB,EAC7CC,EAAoBF,EAAKC,CAAE,EACpBD,EAAI,mBAAmBC,EAAG,OAAOD,EAAI,iBAAiB,EAC7D,CAAC,GAAGC,EAAG,QAAQ,EAAE,QAASE,GAAQ,CAChC,GAAIA,EAAI,SAAS,SAAW,GAAKA,EAAI,cAAc,SAAS,EAAGA,EAAI,UAAY,0BACtEA,EAAI,SAAS,OAAS,EAAG,CAChCA,EAAI,UAAY,oBAEhB,IAAIC,EACJ,MAAMC,EAASF,EAAI,cAAc,wBAAwB,EACzD,GAAIE,EAIF,GAHAD,EAAW,SAAS,cAAc,KAAK,EACvCA,EAAS,UAAY,kBAEjBC,EAAO,cAAc,GAAG,EAAG,CAE7B,MAAMC,EAAID,EAAO,cAAc,GAAG,EAC5BE,EAAI,SAAS,cAAc,GAAG,EACpCL,EAAoBG,EAAQF,CAAG,EAC/BI,EAAE,OAAOD,CAAC,EACVF,EAAS,OAAOG,CAAC,EACjBF,EAAO,OAAQ,CAC3B,MACYD,EAAS,OAAOC,CAAM,EAK1B,MAAMG,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,iBACpB,CAAC,GAAGL,EAAI,QAAQ,EAAE,QAASM,GAAU,CAC/BA,IAAUL,IACZI,EAAQ,OAAOC,CAAK,EACpBP,EAAoBO,EAAON,CAAG,EAE1C,CAAS,EACDA,EAAI,OAAOK,CAAO,EAEdJ,GAAUD,EAAI,QAAQC,CAAQ,EAElC,MAAMM,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,UAAY,oCACjBA,EAAK,aAAa,YAAa,OAAO,EACtCA,EAAK,aAAa,cAAe,MAAM,EACvCA,EAAK,YAAc,OAEnBP,EAAI,OAAOO,CAAI,CACvB,MAAaP,EAAI,OAAQ,CACzB,CAAK,EACDJ,EAAG,OAAOE,CAAE,CAChB,CAAG,EACDF,EAAG,iBAAiB,eAAe,EAAE,QAASY,GAAQ,CACpD,MAAMC,EAAeC,EAAuBF,EAAI,IAAKA,EAAI,IAAK,GAAO,CAAC,CAAE,MAAO,KAAO,CAAA,CAAC,EACvFT,EAAoBS,EAAKC,EAAa,cAAc,KAAK,CAAC,EAC1DD,EAAI,QAAQ,SAAS,EAAE,YAAYC,CAAY,CACnD,CAAG,EACDd,EAAM,YAAc,GACpBA,EAAM,OAAOC,CAAE,CACjB"}